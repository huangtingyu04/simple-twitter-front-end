{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/core-js/internals/regexp-flags.js","webpack:///./src/views/UserSetting.vue?cb5b","webpack:///src/views/UserSetting.vue","webpack:///./src/views/UserSetting.vue?53db","webpack:///./src/views/UserSetting.vue","webpack:///./src/views/UserSetting.vue?29fa"],"names":["uncurryThis","PROPER_FUNCTION_NAME","PROPER","redefine","anObject","isPrototypeOf","$toString","fails","regExpFlags","TO_STRING","RegExpPrototype","RegExp","prototype","n$ToString","getFlags","NOT_GENERIC","call","source","flags","INCORRECT_NAME","name","R","this","p","rf","f","undefined","unsafe","module","exports","that","result","global","ignoreCase","multiline","dotAll","unicode","sticky","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","on","$event","preventDefault","stopPropagation","handleSubmit","apply","arguments","directives","rawName","value","user","expression","domProps","target","composing","$set","currentUser","staticRenderFns","components","Navbar","TweetModal","data","id","account","email","password","checkPassword","role","computed","created","setUser","beforeRouteUpdate","next","watch","methods","toString","userId","$router","push","component"],"mappings":"yIACA,IAAIA,EAAc,EAAQ,QACtBC,EAAuB,EAAQ,QAA8BC,OAC7DC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAgB,EAAQ,QACxBC,EAAY,EAAQ,QACpBC,EAAQ,EAAQ,QAChBC,EAAc,EAAQ,QAEtBC,EAAY,WACZC,EAAkBC,OAAOC,UACzBC,EAAaH,EAAgBD,GAC7BK,EAAWd,EAAYQ,GAEvBO,EAAcR,GAAM,WAAc,MAAuD,QAAhDM,EAAWG,KAAK,CAAEC,OAAQ,IAAKC,MAAO,SAE/EC,EAAiBlB,GAAwBY,EAAWO,MAAQX,GAI5DM,GAAeI,IACjBhB,EAASQ,OAAOC,UAAWH,GAAW,WACpC,IAAIY,EAAIjB,EAASkB,MACbC,EAAIjB,EAAUe,EAAEJ,QAChBO,EAAKH,EAAEH,MACPO,EAAInB,OAAiBoB,IAAPF,GAAoBnB,EAAcK,EAAiBW,MAAQ,UAAWX,GAAmBI,EAASO,GAAKG,GACzH,MAAO,IAAMD,EAAI,IAAME,IACtB,CAAEE,QAAQ,K,kCC3Bf,IAAIvB,EAAW,EAAQ,QAIvBwB,EAAOC,QAAU,WACf,IAAIC,EAAO1B,EAASkB,MAChBS,EAAS,GAOb,OANID,EAAKE,SAAQD,GAAU,KACvBD,EAAKG,aAAYF,GAAU,KAC3BD,EAAKI,YAAWH,GAAU,KAC1BD,EAAKK,SAAQJ,GAAU,KACvBD,EAAKM,UAASL,GAAU,KACxBD,EAAKO,SAAQN,GAAU,KACpBA,I,yCCdT,IAAIO,EAAS,WAAa,IAAIC,EAAIjB,KAASkB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAUA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACL,EAAIM,GAAG,UAAUH,EAAG,OAAO,CAACI,MAAM,CAAC,OAAS,IAAIC,GAAG,CAAC,OAAS,SAASC,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBX,EAAIY,aAAaC,MAAM,KAAMC,cAAc,CAACX,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAACI,MAAM,CAAC,IAAM,YAAY,CAACP,EAAIM,GAAG,QAAQH,EAAG,QAAQ,CAACY,WAAW,CAAC,CAAClC,KAAK,QAAQmC,QAAQ,UAAUC,MAAOjB,EAAIkB,KAAY,QAAEC,WAAW,iBAAiBZ,MAAM,CAAC,KAAO,OAAO,KAAO,UAAU,GAAK,WAAWa,SAAS,CAAC,MAASpB,EAAIkB,KAAY,SAAGV,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOY,OAAOC,WAAqBtB,EAAIuB,KAAKvB,EAAIkB,KAAM,UAAWT,EAAOY,OAAOJ,WAAWd,EAAG,OAAO,CAACE,YAAY,UAAU,CAACL,EAAIM,GAAG,SAASH,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAACI,MAAM,CAAC,IAAM,SAAS,CAACP,EAAIM,GAAG,QAAQH,EAAG,QAAQ,CAACY,WAAW,CAAC,CAAClC,KAAK,QAAQmC,QAAQ,UAAUC,MAAOjB,EAAIkB,KAAS,KAAEC,WAAW,cAAcZ,MAAM,CAAC,KAAO,OAAO,KAAO,OAAO,GAAK,OAAO,YAAc,YAAYa,SAAS,CAAC,MAASpB,EAAIkB,KAAS,MAAGV,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOY,OAAOC,WAAqBtB,EAAIuB,KAAKvB,EAAIkB,KAAM,OAAQT,EAAOY,OAAOJ,aAAad,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAACI,MAAM,CAAC,IAAM,UAAU,CAACP,EAAIM,GAAG,WAAWH,EAAG,QAAQ,CAACY,WAAW,CAAC,CAAClC,KAAK,QAAQmC,QAAQ,UAAUC,MAAOjB,EAAIkB,KAAU,MAAEC,WAAW,eAAeZ,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQ,GAAK,QAAQ,YAAc,qBAAqBa,SAAS,CAAC,MAASpB,EAAIkB,KAAU,OAAGV,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOY,OAAOC,WAAqBtB,EAAIuB,KAAKvB,EAAIkB,KAAM,QAAST,EAAOY,OAAOJ,aAAad,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAACI,MAAM,CAAC,IAAM,aAAa,CAACP,EAAIM,GAAG,QAAQH,EAAG,QAAQ,CAACY,WAAW,CAAC,CAAClC,KAAK,QAAQmC,QAAQ,UAAUC,MAAOjB,EAAIkB,KAAa,SAAEC,WAAW,kBAAkBZ,MAAM,CAAC,KAAO,WAAW,GAAK,WAAW,KAAO,YAAYa,SAAS,CAAC,MAASpB,EAAIkB,KAAa,UAAGV,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOY,OAAOC,WAAqBtB,EAAIuB,KAAKvB,EAAIkB,KAAM,WAAYT,EAAOY,OAAOJ,aAAad,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAACI,MAAM,CAAC,IAAM,sBAAsB,CAACP,EAAIM,GAAG,UAAUH,EAAG,QAAQ,CAACY,WAAW,CAAC,CAAClC,KAAK,QAAQmC,QAAQ,UAAUC,MAAOjB,EAAIkB,KAAkB,cAAEC,WAAW,uBAAuBZ,MAAM,CAAC,KAAO,WAAW,GAAK,gBAAgB,KAAO,iBAAiBa,SAAS,CAAC,MAASpB,EAAIkB,KAAkB,eAAGV,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOY,OAAOC,WAAqBtB,EAAIuB,KAAKvB,EAAIkB,KAAM,gBAAiBT,EAAOY,OAAOJ,aAAad,EAAG,SAAS,CAACE,YAAY,WAAWE,MAAM,CAAC,KAAO,WAAW,CAACP,EAAIM,GAAG,gBAAgBH,EAAG,aAAa,CAACI,MAAM,CAAC,eAAeP,EAAIwB,gBAAgB,IACnvFC,EAAkB,G,8HC+EtB,GACE5C,KAAM,cACN6C,WAAY,CACVC,OAAJ,OACIC,WAAJ,QAEEC,KANF,WAOI,MAAO,CACLX,KAAM,CACJY,IAAK,EACLjD,KAAM,GACNkD,QAAS,GACTC,MAAO,GACPC,SAAU,GACVC,cAAe,GACfC,KAAM,QAERF,SAAU,GACVC,cAAe,KAGnBE,SAAU,OAAZ,OAAY,CAAZ,GACA,mDAEEC,QAxBF,WAyBI,IAA6B,IAAzBtD,KAAKyC,YAAYM,GAArB,CACA,IAAJ,wBACI/C,KAAKuD,QAAQR,KAEfS,kBA7BF,SA6BA,OACI,IAA6B,IAAzBxD,KAAKyC,YAAYM,GAArB,CACA,IAAJ,cACI/C,KAAKuD,QAAQR,GACbU,MAEFC,MAAO,CACLjB,YADJ,SACA,GACM,IAAiB,IAAbN,EAAKY,GAAT,CACA,IAAN,wBACM/C,KAAKuD,QAAQR,MAGjBY,QAAS,CACPJ,QADJ,SACA,GACM,IAAN,kEAEUR,EAAGa,aAAeC,EAAOD,YAC3B5D,KAAK8D,QAAQC,KAAK,CAA1B,mBAEM/D,KAAKmC,KAAO,CAAlB,uCAEI,aATJ,WASA,gLAEA,0CAFA,uBAGA,aACA,2BAJA,6BAQA,sCARA,uBASA,aACA,wBAVA,6BAcA,uCAdA,wBAeA,aACA,oBAhBA,kCAoBA,mBACA,GACA,iBACA,mBACA,uBACA,yBACA,oCA1BA,UA4BA,eACA,SACA,aA9BA,oBA4BA,EA5BA,EA4BA,KAIA,qBAhCA,uBAiCA,qBAjCA,QAmCA,aACA,qBAEA,0DAtCA,qDAwCA,kBACA,aACA,oBA1CA,+DCnIqV,I,wBCQjV6B,EAAY,eACd,EACAhD,EACA0B,GACA,EACA,KACA,WACA,MAIa,aAAAsB,E,2CCnBf","file":"js/chunk-7eacd516.7bdea31c.js","sourcesContent":["'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar $toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar n$ToString = RegExpPrototype[TO_STRING];\nvar getFlags = uncurryThis(regExpFlags);\n\nvar NOT_GENERIC = fails(function () { return n$ToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = PROPER_FUNCTION_NAME && n$ToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = $toString(R.source);\n    var rf = R.flags;\n    var f = $toString(rf === undefined && isPrototypeOf(RegExpPrototype, R) && !('flags' in RegExpPrototype) ? getFlags(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Navbar'),_c('div',{staticClass:\"wide-container\"},[_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"form-setting\"},[_c('div',{staticClass:\"main-title\"},[_vm._v(\"帳戶設定\")]),_c('form',{attrs:{\"action\":\"\"},on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"input-field\"},[_c('label',{attrs:{\"for\":\"account\"}},[_vm._v(\"帳號\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.account),expression:\"user.account\"}],attrs:{\"type\":\"text\",\"name\":\"account\",\"id\":\"account\"},domProps:{\"value\":(_vm.user.account)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"account\", $event.target.value)}}}),_c('span',{staticClass:\"symbol\"},[_vm._v(\"@\")])]),_c('div',{staticClass:\"input-field\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"名稱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.name),expression:\"user.name\"}],attrs:{\"type\":\"text\",\"name\":\"name\",\"id\":\"name\",\"placeholder\":\"John Doe\"},domProps:{\"value\":(_vm.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"input-field\"},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.email),expression:\"user.email\"}],attrs:{\"type\":\"text\",\"name\":\"email\",\"id\":\"email\",\"placeholder\":\"JohnDoe@gmail.com\"},domProps:{\"value\":(_vm.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"email\", $event.target.value)}}})]),_c('div',{staticClass:\"input-field\"},[_c('label',{attrs:{\"for\":\"password\"}},[_vm._v(\"密碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],attrs:{\"type\":\"password\",\"id\":\"password\",\"name\":\"password\"},domProps:{\"value\":(_vm.user.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"password\", $event.target.value)}}})]),_c('div',{staticClass:\"input-field\"},[_c('label',{attrs:{\"for\":\"passwordConfirmed\"}},[_vm._v(\"密碼確認\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.checkPassword),expression:\"user.checkPassword\"}],attrs:{\"type\":\"password\",\"id\":\"checkPassword\",\"name\":\"checkPassword\"},domProps:{\"value\":(_vm.user.checkPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"checkPassword\", $event.target.value)}}})]),_c('button',{staticClass:\"btn-main\",attrs:{\"type\":\"submit\"}},[_vm._v(\"儲存\")])])])])]),_c('TweetModal',{attrs:{\"current-user\":_vm.currentUser}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Navbar />\n    <div class=\"wide-container\">\n      <div class=\"main\">\n        <div class=\"form-setting\">\n          <div class=\"main-title\">帳戶設定</div>\n          <form action=\"\" @submit.prevent.stop=\"handleSubmit\">\n            <div class=\"input-field\">\n              <label for=\"account\">帳號</label>\n              <input\n                type=\"text\"\n                name=\"account\"\n                id=\"account\"\n                v-model=\"user.account\"\n              />\n              <span class=\"symbol\">@</span>\n            </div>\n            <div class=\"input-field\">\n              <label for=\"name\">名稱</label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                placeholder=\"John Doe\"\n                v-model=\"user.name\"\n              />\n            </div>\n            <div class=\"input-field\">\n              <label for=\"email\">Email</label>\n              <input\n                type=\"text\"\n                name=\"email\"\n                id=\"email\"\n                placeholder=\"JohnDoe@gmail.com\"\n                v-model=\"user.email\"\n              />\n            </div>\n            <div class=\"input-field\">\n              <label for=\"password\">密碼</label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                v-model=\"user.password\"\n              />\n            </div>\n            <div class=\"input-field\">\n              <label for=\"passwordConfirmed\">密碼確認</label>\n              <input\n                type=\"password\"\n                id=\"checkPassword\"\n                name=\"checkPassword\"\n                v-model=\"user.checkPassword\"\n              />\n            </div>\n            <!-- <div class=\"input-field input-alert\">\n              <label for=\"passwordConfirmed1\">密碼錯誤</label>\n              <input type=\"text\" id=\"passwordConfirmed1\" />\n              <div class=\"alert\">\n                <div class=\"alert-text\">字數超出上限!</div>\n                <div class=\"alert-limit\">8/50</div>\n              </div>\n            </div> -->\n            <button type=\"submit\" class=\"btn-main\">儲存</button>\n          </form>\n        </div>\n      </div>\n    </div>\n    <TweetModal :current-user=\"currentUser\" />\n  </div>\n</template>\n\n<script>\nimport Navbar from \"./../components/Navbar\";\nimport TweetModal from \"../components/TweetModal.vue\";\nimport { successToast, errorToast } from \"../utils/toast\";\nimport { mapState } from \"vuex\";\nimport usersAPI from \"../apis/users\";\n\nexport default {\n  name: \"UserSetting\",\n  components: {\n    Navbar,\n    TweetModal,\n  },\n  data() {\n    return {\n      user: {\n        id: -1,\n        name: \"\",\n        account: \"\",\n        email: \"\",\n        password: \"\",\n        checkPassword: \"\",\n        role: \"user\",\n      },\n      password: \"\",\n      checkPassword: \"\",\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  created() {\n    if (this.currentUser.id === -1) return;\n    const { id } = this.$route.params;\n    this.setUser(id);\n  },\n  beforeRouteUpdate(to, from, next) {\n    if (this.currentUser.id === -1) return;\n    const { id } = to.params;\n    this.setUser(id);\n    next();\n  },\n  watch: {\n    currentUser(user) {\n      if (user.id === -1) return;\n      const { id } = this.$route.params;\n      this.setUser(id);\n    },\n  },\n  methods: {\n    setUser(userId) {\n      const { id, name, email, account, role } = this.currentUser;\n\n      if (id.toString() !== userId.toString()) {\n        this.$router.push({ name: \"not-found\" });\n      }\n      this.user = { id, name, email, account, role };\n    },\n    async handleSubmit() {\n      try {\n        if (!this.user.name || !this.user.account || !this.user.email) {\n          errorToast.fire({\n            title: \"請填寫帳號/名稱/電子郵件後送出\",\n          });\n          return;\n        }\n        if (!this.user.password || !this.user.checkPassword) {\n          errorToast.fire({\n            title: \"請填寫密碼與密碼確認後送出\",\n          });\n          return;\n        }\n        if (this.user.password !== this.user.checkPassword) {\n          errorToast.fire({\n            title: \"兩次密碼輸入不一致\",\n          });\n          return;\n        }\n        const userId = this.currentUser.id;\n        const formData = {\n          name: this.user.name,\n          email: this.user.email,\n          account: this.user.account,\n          password: this.user.password,\n          checkPassword: this.user.checkPassword,\n        };\n        const { data } = await usersAPI.update({\n          userId,\n          formData,\n        });\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        successToast.fire({\n          title: \"已成功更新使用者資訊\",\n        });\n        this.$router.push({ name: \"user-tweet\", params: { id: this.user.id } });\n      } catch (error) {\n        console.log(error);\n        errorToast.fire({\n          title: \"無法更新使用者資訊\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"sass\" scoped>\n@import '../styles/forms'\n@import '../styles/formSign'\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserSetting.vue?vue&type=template&id=92f7f08e&scoped=true&\"\nimport script from \"./UserSetting.vue?vue&type=script&lang=js&\"\nexport * from \"./UserSetting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserSetting.vue?vue&type=style&index=0&id=92f7f08e&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92f7f08e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=style&index=0&id=92f7f08e&lang=sass&scoped=true&\""],"sourceRoot":""}