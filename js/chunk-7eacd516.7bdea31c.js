(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eacd516"],{2046:function(e,t,a){},"25f0":function(e,t,a){"use strict";var s=a("e330"),r=a("5e77").PROPER,n=a("6eeb"),i=a("825a"),o=a("3a9b"),u=a("577e"),c=a("d039"),d=a("ad6d"),l="toString",m=RegExp.prototype,p=m[l],f=s(d),v=c((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),w=r&&p.name!=l;(v||w)&&n(RegExp.prototype,l,(function(){var e=i(this),t=u(e.source),a=e.flags,s=u(void 0===a&&o(m,e)&&!("flags"in m)?f(e):a);return"/"+t+"/"+s}),{unsafe:!0})},ad6d:function(e,t,a){"use strict";var s=a("825a");e.exports=function(){var e=s(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ce99:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Navbar"),a("div",{staticClass:"wide-container"},[a("div",{staticClass:"main"},[a("div",{staticClass:"form-setting"},[a("div",{staticClass:"main-title"},[e._v("帳戶設定")]),a("form",{attrs:{action:""},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"input-field"},[a("label",{attrs:{for:"account"}},[e._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],attrs:{type:"text",name:"account",id:"account"},domProps:{value:e.user.account},on:{input:function(t){t.target.composing||e.$set(e.user,"account",t.target.value)}}}),a("span",{staticClass:"symbol"},[e._v("@")])]),a("div",{staticClass:"input-field"},[a("label",{attrs:{for:"name"}},[e._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"text",name:"name",id:"name",placeholder:"John Doe"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),a("div",{staticClass:"input-field"},[a("label",{attrs:{for:"email"}},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"text",name:"email",id:"email",placeholder:"JohnDoe@gmail.com"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),a("div",{staticClass:"input-field"},[a("label",{attrs:{for:"password"}},[e._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",id:"password",name:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),a("div",{staticClass:"input-field"},[a("label",{attrs:{for:"passwordConfirmed"}},[e._v("密碼確認")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.checkPassword,expression:"user.checkPassword"}],attrs:{type:"password",id:"checkPassword",name:"checkPassword"},domProps:{value:e.user.checkPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"checkPassword",t.target.value)}}})]),a("button",{staticClass:"btn-main",attrs:{type:"submit"}},[e._v("儲存")])])])])]),a("TweetModal",{attrs:{"current-user":e.currentUser}})],1)},r=[],n=a("1da1"),i=a("5530"),o=(a("96cf"),a("b0c0"),a("d3b7"),a("25f0"),a("d178")),u=a("4287"),c=a("eae4"),d=a("2f62"),l=a("4cce"),m={name:"UserSetting",components:{Navbar:o["a"],TweetModal:u["a"]},data:function(){return{user:{id:-1,name:"",account:"",email:"",password:"",checkPassword:"",role:"user"},password:"",checkPassword:""}},computed:Object(i["a"])({},Object(d["b"])(["currentUser","isAuthenticated"])),created:function(){if(-1!==this.currentUser.id){var e=this.$route.params.id;this.setUser(e)}},beforeRouteUpdate:function(e,t,a){if(-1!==this.currentUser.id){var s=e.params.id;this.setUser(s),a()}},watch:{currentUser:function(e){if(-1!==e.id){var t=this.$route.params.id;this.setUser(t)}}},methods:{setUser:function(e){var t=this.currentUser,a=t.id,s=t.name,r=t.email,n=t.account,i=t.role;a.toString()!==e.toString()&&this.$router.push({name:"not-found"}),this.user={id:a,name:s,email:r,account:n,role:i}},handleSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.user.name&&e.user.account&&e.user.email){t.next=4;break}return c["a"].fire({title:"請填寫帳號/名稱/電子郵件後送出"}),t.abrupt("return");case 4:if(e.user.password&&e.user.checkPassword){t.next=7;break}return c["a"].fire({title:"請填寫密碼與密碼確認後送出"}),t.abrupt("return");case 7:if(e.user.password===e.user.checkPassword){t.next=10;break}return c["a"].fire({title:"兩次密碼輸入不一致"}),t.abrupt("return");case 10:return a=e.currentUser.id,s={name:e.user.name,email:e.user.email,account:e.user.account,password:e.user.password,checkPassword:e.user.checkPassword},t.next=14,l["a"].update({userId:a,formData:s});case 14:if(r=t.sent,n=r.data,"success"===n.status){t.next=18;break}throw new Error(n.message);case 18:c["b"].fire({title:"已成功更新使用者資訊"}),e.$router.push({name:"user-tweet",params:{id:e.user.id}}),t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](0),console.log(t.t0),c["a"].fire({title:"無法更新使用者資訊"});case 26:case"end":return t.stop()}}),t,null,[[0,22]])})))()}}},p=m,f=(a("fba0"),a("2877")),v=Object(f["a"])(p,s,r,!1,null,"92f7f08e",null);t["default"]=v.exports},fba0:function(e,t,a){"use strict";a("2046")}}]);
//# sourceMappingURL=chunk-7eacd516.7bdea31c.js.map