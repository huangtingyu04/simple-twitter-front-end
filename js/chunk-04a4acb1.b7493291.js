(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04a4acb1"],{"6ddb":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE/SURBVHgB7dzBbYNAEAXQSSpIOqAEd45TAS2kk7gDgqUg+5KYldnMJH5PmgsSB/4XAsRqIwAAAAAAAAAg17DMtMzHMvMy49cxfsEhLsFfz/nYEHT1XfjrTEE3t8Jf7wI62BL+OuysJfxjsKuW8D2Ed9Ya/iHYjfATCT+R8BMJP5HwEwk/kfATCT+R8BMJP5HwEwk/kfATCT+R8BMJP1FL+P9xxkj8OzfEY4d/fVcPkWCMvxva3jNFo6e43xysTsu8tpzwHPc7BauXaLRHAe/B6i0SDOEhPEfyOqVHfg09X/cUBRaJ+RArQAkFKKEAJRSghAKUUIASClBCAUooQAkFKKEAJRSghAKUUIASClBCAUoowFYFBbSUMAVdbC3BfkEdbS2Bjm6VcAy6s2lfAUNcFgGXWYcDAAAAAAAAAD/5BDLEPVJF20ssAAAAAElFTkSuQmCC"},"6f1a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),a("div",{staticClass:"wide-container"},[a("Spinner",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"main"},[a("TweetContent",{attrs:{"initial-tweet":t.tweet}}),a("ReplyItems",{attrs:{replies:t.replies,"tweet-target":t.tweetTarget}}),a("TweetReplyModal",{attrs:{"tweet-item":t.tweetItem},on:{refresh:t.refresh}}),a("TweetModal",{on:{refresh:t.refresh}})],1),a("PopularUsersCard")],1)],1)},n=[],i=a("1da1"),r=a("5530"),c=(a("96cf"),a("a4d3"),a("e01a"),a("b0c0"),a("d178")),o=a("5a23"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"top"},[s("img",{staticClass:"top-back",attrs:{src:a("6ddb"),alt:""},on:{click:function(e){return t.$router.back()}}}),s("p",{staticClass:"top-title"},[t._v("推文")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"content-header"},[s("img",{staticClass:"content-header-icon",attrs:{src:t._f("emptyImage")(t.tweet.avatar),alt:""}}),s("div",{staticClass:"content-header-title"},[s("div",{staticClass:"content-header-title-name"},[t._v(t._s(t.tweet.name))]),s("div",{staticClass:"content-header-title-account"},[t._v("@"+t._s(t.tweet.account))])])]),s("div",{staticClass:"content-body"},[t._v(" "+t._s(t.tweet.description)+" ")]),s("div",{staticClass:"content-time"},[t._v(t._s(t._f("fromNow")(t.tweet.createdAt)))]),s("div",{staticClass:"content-info"},[s("div",{staticClass:"content-info-reply"},[s("div",{staticClass:"content-info-reply-count"},[t._v(" "+t._s(t.tweet.replyLength)),s("span",{staticClass:"content-info-reply-unit"},[t._v(" 回覆")])])]),s("div",{staticClass:"content-info-liked"},[s("div",{staticClass:"content-info-liked-count"},[t._v(" "+t._s(t.tweet.likeLength)),s("span",{staticClass:"content-info-liked-unit"},[t._v(" 喜歡次數")])])])]),s("div",{staticClass:"content-action"},[s("img",{staticClass:"content-action-reply",attrs:{src:a("35ed"),alt:"","data-bs-toggle":"modal","data-bs-target":"#tweet-reply-modal"}}),t.tweet.isLike?s("img",{staticClass:"content-action-liked",attrs:{src:a("f790"),alt:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLike(t.tweet.id)}}}):s("img",{staticClass:"content-action-liked",attrs:{src:a("0e53"),alt:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(t.tweet.id)}}})])])])},d=[],u=a("2708"),p=a("6783"),w=a("eae4"),A={name:"TweetContent",mixins:[u["b"],u["a"]],props:{initialTweet:{type:Object,required:!0}},data:function(){return{tweet:{},isLiked:!1}},watch:{initialTweet:function(t){this.tweet=Object(r["a"])(Object(r["a"])({},this.tweet),t)}},methods:{addLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p["a"].addLike({tweetId:t});case 3:if(s=a.sent,n=s.data,e.tweet.isLike=!0,e.tweet.likeLength=e.tweet.likeLength+1,"success"===n.status){a.next=9;break}throw new Error(n.message);case 9:a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0),w["a"].fire({title:"無法按讚，請稍後再試"});case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()},deleteLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p["a"].deleteLike({tweetId:t});case 3:if(s=a.sent,n=s.data,e.tweet.isLike=!1,e.tweet.likeLength=e.tweet.likeLength-1,"success"===n.status){a.next=9;break}throw new Error(n.message);case 9:a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0),w["a"].fire({title:"無法按讚，請稍後再試"});case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}},f=A,v=(a("aa07"),a("2877")),m=Object(v["a"])(f,l,d,!1,null,"7ea061e8",null),g=m.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"replies"},t._l(t.replies,(function(e){return a("div",{key:e.id,staticClass:"reply"},[a("router-link",{attrs:{to:{name:"user-tweet",params:{id:e.User.id}}}},[a("img",{staticClass:"reply-icon",attrs:{src:t._f("emptyImage")(e.User?e.User.avatar:""),alt:""}})]),a("div",{staticClass:"reply-content"},[a("div",{staticClass:"reply-content-title"},[a("router-link",{staticClass:"reply-content-title-name",attrs:{to:{name:"user-tweet",params:{id:e.User.id}}}},[t._v(" "+t._s(e.User?e.User.name:"")+" ")]),a("router-link",{staticClass:"reply-content-title-account",attrs:{to:{name:"user-tweet",params:{id:e.User.id}}}},[t._v(" @"+t._s(e.User?e.User.account:"")),a("span",[t._v("・")])]),a("div",{staticClass:"reply-content-title-time"},[t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" ")])],1),a("div",{staticClass:"reply-content-target"},[t._v(" 回覆 "),a("span",{staticClass:"reply-content-target-account"},[t._v("@"+t._s(t.tweetTarget))])]),a("div",{staticClass:"reply-content-comment"},[t._v(t._s(e.comment))])])],1)})),0)},k=[],C={name:"ReplyItems",mixins:[u["b"],u["a"]],props:{replies:{type:Array,required:!0},tweetTarget:{type:String,required:!0}}},b=C,L=(a("ac59"),Object(v["a"])(b,h,k,!1,null,"7d7e40f3",null)),_=L.exports,y=a("811a"),T=a("4287"),U=a("2375"),x=a("2f62"),R={name:"Tweet",components:{Navbar:c["a"],TweetContent:g,ReplyItems:_,TweetReplyModal:y["a"],TweetModal:T["a"],Spinner:U["a"],PopularUsersCard:o["a"]},data:function(){return{tweet:{id:1,name:"",account:"",avatar:"",description:"",replyLength:0,likeLength:0,createdAt:"",isLike:!1},tweetItem:{},replies:[],isLoading:!0,tweetTarget:""}},computed:Object(r["a"])({},Object(x["b"])(["currentUser","isAuthenticated"])),created:function(){var t=this.$route.params.id;this.fetchTweet(t)},beforeRouteUpdate:function(t,e,a){var s=t.params.id;this.fetchTweet(s),a()},methods:{fetchTweet:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,n,i,r,c,o,l,d,u,A,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isLoading=!0,a.next=4,p["a"].getTweet(t);case 4:if(s=a.sent,n=s.data,i=s.statusText,"OK"===i){a.next=9;break}throw new Error;case 9:r=n.id,c=n.createdAt,o=n.description,l=n.isLike,d=n.tweetLikeCount,u=n.tweetReplyCount,A=n.User,f=n.Replies,e.tweet={id:r,name:A?A.name:"",account:A?A.account:"",avatar:A?A.avatar:"",description:o,replyLength:u,likeLength:d,createdAt:c,isLike:l},e.tweetItem={id:r,description:o,createdAt:c,User:A},e.replies=f,e.tweetTarget=n.User.account,e.isLoading=!1,a.next=20;break;case 15:a.prev=15,a.t0=a["catch"](0),console.log(a.t0),e.isLoading=!1,w["a"].fire({title:"無法取得推文"});case 20:case"end":return a.stop()}}),a,null,[[0,15]])})))()},refresh:function(){var t=this.$route.params.id;this.fetchTweet(t)}}},E=R,B=Object(v["a"])(E,s,n,!1,null,null,null);e["default"]=B.exports},aa07:function(t,e,a){"use strict";a("d696")},ac59:function(t,e,a){"use strict";a("e186")},d696:function(t,e,a){},e186:function(t,e,a){}}]);
//# sourceMappingURL=chunk-04a4acb1.b7493291.js.map